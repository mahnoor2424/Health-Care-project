@{
    ViewData["Title"] = "Medical Chat";
    Layout = "_AdminLayout";
}

<link href="~/css/chat.css" rel="stylesheet" />

<div class="chat-container" style="margin-top:70px;">
    <div class="chat-header">
        <h5 class="mb-0">
            <i class="bi bi-chat-dots me-2"></i>
            Doctor-Patient Chat (Appointment #@ViewBag.AppointmentId)
        </h5>
        <span id="typingIndicator" class="small"></span>
    </div>

    <div class="chat-messages" id="chatMessages">
        <!-- Messages will appear here -->
    </div>

    <div class="chat-input">
        <div class="input-group">
            <input type="text"
                   id="messageInput"
                   class="form-control"
                   placeholder="Type your message..."
                   autocomplete="off">
            <button id="sendButton" class="btn btn-primary">
                <i class="bi bi-send"></i>
                Send
            </button>
        </div>
    </div>
</div>

<script>
    // Pass server-side values to JavaScript
    window.appointmentId = '@ViewBag.AppointmentId';
    window.currentUser = '@ViewBag.CurrentUser';
</script>

@section Scripts {
    <script src="~/lib/signalr/dist/browser/signalr.min.js"></script>
    <script src="~/js/chat.js"></script>
}